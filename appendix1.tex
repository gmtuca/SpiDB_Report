\chapter{Appendix}

\section{Sectionnnn}


\lstinputlisting[language=C, caption=Storing incomming packets into a queue, label={lst:sdp_packet_callback}]{code/sdp_packet_callback.c}


\section{Experiments Specification}
\label{sec:appendix-specs}

The \textbf{memcached} and \textbf{Redis} benchmarks were run on an ASUS X555L quadcore Intel(R) Core(TM) i5-5200U CPU @ 2.20GHz, 8gb DDR3 RAM @ 1600 MHz. SpiNN-3

\section{Queries}
\label{sec:appendix-queries}

\lstinputlisting[language=C]{code/table.c}

\section{Communication Reliability}
\label{sec:appendix_comm_rel}

This section contains code snippets to send SDP packets from single source to single destination with delays between them. These were used in the experiments described on chapter \ref{cha:eval}, section \ref{sec:eval_comm_rel}.

Transmitting packets with variable delay:

\begin{lstlisting}[caption={Source}]
uint rcv = 0;

void sdp_packet_callback(register uint mailbox, uint port) {
    rcv++;
    spin1_msg_free((sdp_msg_t*)mailbox);
    return;
}

...

spin1_callback_on(SDP_PACKET_RX,    sdp_packet_callback, 0);

\end{lstlisting}

\begin{lstlisting}[caption={Destination}]
void send_sdp_packets(uint32_t number_of_packets, uint32_t delay, uint32_t chip, uint32_t core){
	sdp_msg_t msg;
    msg.flags       = 0x87;
    msg.tag         = 0;

    msg.srce_addr   = spin1_get_chip_id();
    msg.srce_port   = (SDP_PORT << PORT_SHIFT) | spin1_get_core_id();

    msg.dest_addr   = chip;
    msg.dest_port   = (SDP_PORT << PORT_SHIFT) | core;
    msg.length 		= sizeof(sdp_hdr_t);

    for(uint i = 0; i < number_of_packets; i++){
    	if(!spin1_send_sdp_msg(&msg, SDP_TIMEOUT)){
        	log_error("Failed to send");
        }
        sark_delay_us(delay);
    }
}
\end{lstlisting}

SpiDB performance with variable delay:

\begin{table}
\begin{tabular}{ r | r | r }
\textbf{interval (Âµs)} & \textbf{packet drop (\%)} & \textbf{performance (ops/sec)}  \\
100 & 0.076 	& 6175 \\
90	& 0.670		& 6608 \\
80	& 0.475		& 7042 \\
70	& 0.445		& 7408 \\
60	& 0.150		& 8394 \\
50	& 0.265		& 9057 \\
40	& 1.010		& 9882 \\
30	& 11.510	& 9918 \\
20	& 22.910	& 9506 \\ 
10	& 34.140	& 8960 \\
7	& 33.965 	& 9778 \\
4	& 98.432 	& 243 \\
\end{tabular}
\caption{SpiDB insertion performance with variable transmission delay}
\label{table:performance_delay}
\end{table}


